ü§ñ –ú–û–ô TELEGRAM –ë–û–¢ ‚Äî –ö–û–ù–§–ò–ì –î–õ–Ø –ò–ò
üìã –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
–ù–∞–∑–≤–∞–Ω–∏–µ: cabinet-bot (–ë–æ—Ç —É—á—ë—Ç–∞ —Ä–∞–±–æ—Ç –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ)
GitHub: https://github.com/yaMovsar/cabinet-bot
–•–æ—Å—Ç–∏–Ω–≥: Railway.app
–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: PostgreSQL (–Ω–∞ Railway)

üõ† –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
Python 3.11
aiogram 3.4.1
PostgreSQL (asyncpg)
APScheduler
openpyxl (Excel –æ—Ç—á—ë—Ç—ã)
üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
text

cabinet-bot/
‚îú‚îÄ‚îÄ bot.py                 # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, scheduler, –±—ç–∫–∞–ø—ã
‚îú‚îÄ‚îÄ config.py              # –¢–æ–∫–µ–Ω—ã, ADMIN_ID, MANAGER_IDS
‚îú‚îÄ‚îÄ database.py            # –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å PostgreSQL
‚îú‚îÄ‚îÄ reports.py             # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Excel –æ—Ç—á—ë—Ç–æ–≤
‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py        # setup_routers()
‚îÇ   ‚îú‚îÄ‚îÄ common.py          # /start, –Ω–∞–≤–∏–≥–∞—Ü–∏—è, –º–µ–Ω—é
‚îÇ   ‚îú‚îÄ‚îÄ worker.py          # –ó–∞–ø–∏—Å–∏ —Ä–∞–±–æ—Ç, –º–æ–∏ –∑–∞–ø–∏—Å–∏, –±–∞–ª–∞–Ω—Å
‚îÇ   ‚îú‚îÄ‚îÄ admin.py           # –ö–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ä–∞–±–æ—Ç—ã, —Ä–∞–±–æ—Ç–Ω–∏–∫–∏, –∑–∞–ø–∏—Å–∏
‚îÇ   ‚îú‚îÄ‚îÄ money.py           # –ê–≤–∞–Ω—Å—ã, —à—Ç—Ä–∞—Ñ—ã, –±–∞–ª–∞–Ω—Å, —Ä–µ–π—Ç–∏–Ω–≥
‚îÇ   ‚îú‚îÄ‚îÄ report_handlers.py # –°–≤–æ–¥–∫–∏, Excel –æ—Ç—á—ë—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ reminders.py       # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ filters.py         # AdminFilter, StaffFilter
‚îú‚îÄ‚îÄ keyboards/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ reply.py           # ReplyKeyboard –º–µ–Ω—é
‚îÇ   ‚îî‚îÄ‚îÄ inline.py          # InlineKeyboard –∫–Ω–æ–ø–∫–∏
‚îú‚îÄ‚îÄ states/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ states.py          # –í—Å–µ FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ formatters.py      # format_date, MONTHS_RU
‚îÇ   ‚îî‚îÄ‚îÄ helpers.py         # send_long_message
‚îú‚îÄ‚îÄ middlewares/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ role.py            # RoleMiddleware (is_admin, is_manager)
‚îî‚îÄ‚îÄ requirements.txt
üë• –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
–†–æ–ª—å	–î–æ—Å—Ç—É–ø
ADMIN_ID	–ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º—É
MANAGER_IDS	–û—Ç—á—ë—Ç—ã, –¥–µ–Ω—å–≥–∏ (–∞–≤–∞–Ω—Å—ã/—à—Ç—Ä–∞—Ñ—ã), —Å–≤–æ–¥–∫–∏
–†–∞–±–æ—Ç–Ω–∏–∫–∏	–ó–∞–ø–∏—Å–∏ —Ä–∞–±–æ—Ç, —Å–≤–æ–π –±–∞–ª–∞–Ω—Å, —Å–≤–æ–∏ –∑–∞–ø–∏—Å–∏
üóÑ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
SQL

-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä–∞–±–æ—Ç
categories (code, name, emoji)

-- –†–∞–±–æ—Ç–Ω–∏–∫–∏
workers (telegram_id, name, registered_at)

-- –ü—Ä–∞–π—Å-–ª–∏—Å—Ç
price_list (code, name, price, price_type, category_code, is_active)
-- price_type: 'unit' (–∑–∞ —à—Ç—É–∫—É) –∏–ª–∏ 'square' (–∑–∞ –º¬≤)

-- –°–≤—è–∑—å —Ä–∞–±–æ—Ç–Ω–∏–∫-–∫–∞—Ç–µ–≥–æ—Ä–∏—è
worker_categories (worker_id, category_code)

-- –ó–∞–ø–∏—Å–∏ –æ —Ä–∞–±–æ—Ç–µ
work_log (id, worker_id, work_code, quantity, price_per_unit, total, work_date, created_at)

-- –ê–≤–∞–Ω—Å—ã
advances (id, worker_id, amount, comment, advance_date, created_at)

-- –®—Ç—Ä–∞—Ñ—ã
penalties (id, worker_id, amount, reason, penalty_date, created_at)

-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
reminder_settings (id, evening_hour, evening_minute, late_hour, late_minute, 
                   report_hour, report_minute, evening_enabled, late_enabled, report_enabled)
üîß –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
–†–∞–±–æ—Ç–Ω–∏–∫:
üìù –ó–∞–ø–∏—Å–∞—Ç—å —Ä–∞–±–æ—Ç—É (–≤—ã–±–æ—Ä –¥–∞—Ç—ã ‚Üí –∫–∞—Ç–µ–≥–æ—Ä–∏—è ‚Üí —Ä–∞–±–æ—Ç–∞ ‚Üí –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ)
üìÅ –ú–æ–∏ –∑–∞–ø–∏—Å–∏ (–ø—Ä–æ—Å–º–æ—Ç—Ä, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ)
üí≥ –ú–æ–π –±–∞–ª–∞–Ω—Å
üí∞ –ó–∞ —Å–µ–≥–æ–¥–Ω—è / üìä –ó–∞ –º–µ—Å—è—Ü
üí¨ –ù–∞–ø–∏—Å–∞—Ç—å –≤–æ–ø—Ä–æ—Å –∞–¥–º–∏–Ω—É
–ê–¥–º–∏–Ω:
‚ûï –î–æ–±–∞–≤–∏—Ç—å (–∫–∞—Ç–µ–≥–æ—Ä–∏—é, –≤–∏–¥ —Ä–∞–±–æ—Ç—ã, —Ä–∞–±–æ—Ç–Ω–∏–∫–∞)
‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å (–∫–∞—Ç–µ–≥–æ—Ä–∏—é, —Ä–∞–±–æ—Ç—É, —Ä–∞—Å—Ü–µ–Ω–∫—É, –∏–º—è —Ä–∞–±–æ—Ç–Ω–∏–∫–∞)
üóë –£–¥–∞–ª–∏—Ç—å (–∫–∞—Ç–µ–≥–æ—Ä–∏—é, —Ä–∞–±–æ—Ç—É, —Ä–∞–±–æ—Ç–Ω–∏–∫–∞)
üîó –ù–∞–∑–Ω–∞—á–∏—Ç—å/—É–±—Ä–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä–∞–±–æ—Ç–Ω–∏–∫—É
üîß –ó–∞–ø–∏—Å–∏ —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤ (–ø—Ä–æ—Å–º–æ—Ç—Ä, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ)
üíæ –ë—ç–∫–∞–ø –ë–î (JSON)
‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Ä–µ–º–µ–Ω–∏)
–ú–µ–Ω–µ–¥–∂–µ—Ä + –ê–¥–º–∏–Ω:
üìÅ –°–≤–æ–¥–∫–∞ –¥–µ–Ω—å / –º–µ—Å—è—Ü (—Å –≤—ã–±–æ—Ä–æ–º —Ä–∞–±–æ—Ç–Ω–∏–∫–∞)
üì• –û—Ç—á—ë—Ç –º–µ—Å—è—Ü / —Ä–∞–±–æ—Ç–Ω–∏–∫ (Excel)
üí≥ –í—ã–¥–∞—Ç—å/—É–¥–∞–ª–∏—Ç—å –∞–≤–∞–Ω—Å
‚ö†Ô∏è –í—ã–ø–∏—Å–∞—Ç—å/—É–¥–∞–ª–∏—Ç—å —à—Ç—Ä–∞—Ñ
üí∞ –ë–∞–ª–∞–Ω—Å —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤
üìä –ó–∞—Ä–∞–±–æ—Ç–æ–∫ –∑–∞ –º–µ—Å—è—Ü
üèÜ –†–µ–π—Ç–∏–Ω–≥ —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤
üíº –ò—Ç–æ–≥–∏ –º–µ—Å—è—Ü–∞
üìù FSM –°–æ—Å—Ç–æ—è–Ω–∏—è (states/states.py)
Python

# –†–∞–±–æ—Ç–Ω–∏–∫
WorkEntry, ViewEntries, WorkerDeleteEntry, WorkerEditEntry

# –ê–¥–º–∏–Ω: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ
AdminAddCategory, AdminAddWork, AdminAddWorker

# –ê–¥–º–∏–Ω: —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
AdminAssignCategory, AdminRemoveCategory, AdminEditPrice, 
AdminRenameWorker, AdminManageEntries, AdminEditCategory, AdminEditWork

# –ê–¥–º–∏–Ω: —É–¥–∞–ª–µ–Ω–∏–µ
AdminDeleteCategory, AdminDeleteWork, AdminDeleteWorker

# –î–µ–Ω—å–≥–∏
AdminAdvance, AdminDeleteAdvance, AdminPenalty, AdminDeletePenalty

# –û—Ç—á—ë—Ç—ã
ReportWorker, MonthlySummaryWorker

# –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
AdminReminderSettings
üöÄ –ö–æ–º–∞–Ω–¥—ã –¥–µ–ø–ª–æ—è
Bash

cd C:\Users\user\Desktop\cabinet-bot
git add .
git commit -m "–æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"
git push origin main
Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ø–ª–æ–∏—Ç –ø–æ—Å–ª–µ push –≤ main.

üìå –í–∞–∂–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
price_type ‚Äî —Ä–∞–±–æ—Ç—ã –º–æ–≥—É—Ç –±—ã—Ç—å "–∑–∞ —à—Ç—É–∫—É" (unit) –∏–ª–∏ "–∑–∞ –º¬≤" (square)
–ë—ç–∫–∞–ø—ã ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∂–¥—ã–µ 5 —á–∞—Å–æ–≤ + –≤ 23:00 + –≤—Ä—É—á–Ω—É—é
–ò–º–ø–æ—Ä—Ç JSON ‚Äî –∞–¥–º–∏–Ω –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å .json —Ñ–∞–π–ª –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ë–î
–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è ‚Äî –≤–µ—á–µ—Ä–Ω–µ–µ, –ø–æ–∑–¥–Ω–µ–µ, –æ—Ç—á—ë—Ç –∞–¥–º–∏–Ω—É (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–µ –≤—Ä–µ–º—è)
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è ‚Äî –∞–¥–º–∏–Ω –∏ –º–µ–Ω–µ–¥–∂–µ—Ä—ã –ø–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å—è—Ö
üí¨ –ö–∞–∫ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –ò–ò
–ü—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ —Å–∫–æ–ø–∏—Ä—É–π —ç—Ç–æ—Ç –∫–æ–Ω—Ñ–∏–≥ –∏ –¥–æ–±–∞–≤—å:

text

–í–æ—Ç –º–æ–π –±–æ—Ç: [—ç—Ç–æ—Ç –∫–æ–Ω—Ñ–∏–≥]

–ü—Ä–æ–±–ª–µ–º–∞/–∑–∞–¥–∞—á–∞: [–æ–ø–∏—Å–∞–Ω–∏–µ]

–ù—É–∂–Ω—ã–µ —Ñ–∞–π–ª—ã:
[–≤—Å—Ç–∞–≤—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω—É–∂–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É type]
–ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ñ–∞–π–ª–æ–≤:
Bash

type bot.py
type database.py
type handlers\worker.py
type handlers\admin.py
type handlers\money.py
type handlers\common.py
type handlers\report_handlers.py
type handlers\reminders.py
type handlers\filters.py
type keyboards\reply.py
type keyboards\inline.py
type states\states.py
type utils\formatters.py
type utils\helpers.py
type middlewares\role.py